# Поддержка SVG иконок

## Автоматическая конвертация SVG в PNG

Приложение SCADA теперь поддерживает автоматическую конвертацию SVG файлов в PNG формат при их использовании в качестве иконок для кнопок.

### Как это работает

1. **Выбор SVG иконки**: При выборе SVG файла через диалог настройки кнопки (правый клик → выбор иконки)
2. **Автоматическая конвертация**: При загрузке SVG файла в `PathToImageConverter` автоматически:
   - Определяет, что файл имеет расширение `.svg`
   - Вызывает `SvgToPngConverter.ConvertSvgToPng()`
   - Создаёт PNG файл с тем же именем в той же папке
   - Загружает созданный PNG вместо SVG

3. **Кеширование**: Созданный PNG файл сохраняется рядом с исходным SVG файлом, поэтому:
   - При последующих запусках конвертация не выполняется повторно
   - PNG файл используется напрямую, если он существует

### Технические детали

**Используемая библиотека**: `Svg.Skia` v2.0.0.1
- Полная поддержка стандарта SVG 1.1
- Высокое качество растеризации через SkiaSharp
- Поддержка прозрачности и сглаживания

**Размеры PNG**:
- По умолчанию используются размеры из SVG файла (viewBox)
- Если размеры не определены, используется 50x50 пикселей
- При необходимости можно указать желаемые размеры программно

**Формат PNG**:
- Качество: 100%
- Прозрачность: Поддерживается (альфа-канал)
- Сглаживание: Включено (AntiAlias)

### Поддерживаемые форматы иконок

В диалоге выбора иконки доступны следующие форматы:
- `*.svg` - векторная графика (автоматически конвертируется в PNG)
- `*.png` - готовые растровые изображения
- `*.jpg`, `*.jpeg` - фотографии и изображения JPEG
- `*.bmp` - битовые карты Windows

### Расположение файлов

**Исходные SVG**: `Scada.Client\Assets\*.svg`
**Созданные PNG**: `Scada.Client\Assets\*.png` (автоматически)
**В выходной директории**: `bin\Debug\net8.0\Assets\*.*` (копируются при сборке)

### Примеры использования

1. **Кнопка с двумя состояниями**:
   - Иконка ON: `Assets/button_on.svg` → автоматически конвертируется в `Assets/button_on.png`
   - Иконка OFF: `Assets/button_off.svg` → автоматически конвертируется в `Assets/button_off.png`

2. **Относительные пути**:
   ```
   IconPathOn = "Assets/motor_on.svg"
   IconPathOff = "Assets/motor_off.svg"
   ```

3. **Абсолютные пути**:
   ```
   IconPathOn = "C:\Icons\custom_on.svg"
   IconPathOff = "C:\Icons\custom_off.svg"
   ```

### Отладка

В случае проблем с конвертацией:
1. Проверьте Output окно Visual Studio (Debug → Windows → Output)
2. Ищите сообщения с префиксом "SVG конвертирован в PNG" или "Ошибка конвертации SVG"
3. Убедитесь, что SVG файл корректный и соответствует стандарту SVG 1.1

### Преимущества

✅ **Простота**: Пользователи могут использовать SVG иконки напрямую
✅ **Производительность**: PNG создаётся один раз, затем используется кеш
✅ **Качество**: Высокое качество растеризации через SkiaSharp
✅ **Гибкость**: Поддержка как SVG, так и готовых растровых форматов
✅ **Прозрачность**: Работает незаметно для пользователя

### Ограничения

- Сложные SVG с градиентами, фильтрами или анимацией могут отображаться некорректно
- Очень большие SVG файлы (>1MB) могут замедлить конвертацию
- Текст в SVG должен использовать стандартные шрифты или быть преобразован в пути
